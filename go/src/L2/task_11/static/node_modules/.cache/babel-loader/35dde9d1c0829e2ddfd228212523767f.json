{"remainingRequest":"/Users/mac/go/src/L2/task_11/static/node_modules/babel-loader/lib/index.js!/Users/mac/go/src/L2/task_11/static/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mac/go/src/L2/task_11/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/go/src/L2/task_11/static/src/components/login/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/go/src/L2/task_11/static/src/components/login/Login.vue","mtime":1660313375647},{"path":"/Users/mac/go/src/L2/task_11/static/babel.config.js","mtime":1653650336335},{"path":"/Users/mac/go/src/L2/task_11/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/L2/task_11/static/node_modules/babel-loader/lib/index.js","mtime":1656160197672},{"path":"/Users/mac/go/src/L2/task_11/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/L2/task_11/static/node_modules/vue-loader/lib/index.js","mtime":1656160198005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hYy9nby9zcmMvTDIvdGFza18xMS9zdGF0aWMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbWFjL2dvL3NyYy9MMi90YXNrXzExL3N0YXRpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIC8vIGNvbXBvbmVudHM6IHtTaWduVXB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYWdlOiAnbG9naW4nLAogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGxvZ2luOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBjb2RlOiAnJywKICAgICAgbG9naW5SdWxlczogW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICEhdiB8fCAnTG9naW4gaXMgcmVxdWlyZWQnOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2ICYmIHYubGVuZ3RoIDw9IDYgfHwgJ0xvZ2luIG11c3QgYmUgbGVzcyB0aGFuIDQgY2hhcmFjdGVycyc7CiAgICAgIH1dLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHBhc3N3b3JkUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJzsKICAgICAgfSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdiAmJiB2Lmxlbmd0aCA8PSAxMCB8fCAnUGFzc3dvcmQgbXVzdCBiZSBsZXNzIHRoYW4gMTAgY2hhcmFjdGVycyc7CiAgICAgIH1dLAogICAgICBjb2RlUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ2NvZGUgaXMgcmVxdWlyZWQnOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2ICYmIHYubGVuZ3RoID09PSA0IHx8ICdjb2RlIG11c3QgYmUgNCBjaGFyYWN0ZXJzJzsKICAgICAgfV0sCiAgICAgIGVtYWlsUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ0UtbWFpbCBpcyByZXF1aXJlZCc7CiAgICAgIH0sIGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIC8uK0AuK1wuLisvLnRlc3QodikgfHwgJ0UtbWFpbCBtdXN0IGJlIHZhbGlkJzsKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpOwogICAgICB0aGlzLmxvZ2luUmVxKHsKICAgICAgICBlbWFpbDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5wYXNzd29yZAogICAgICB9KTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgfSwKICAgIHJlc2V0VmFsaWRhdGlvbjogZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICB9LAogICAgbWFyZ2luVG9wOiBmdW5jdGlvbiBtYXJnaW5Ub3AoKSB7CiAgICAgIHZhciBkZXZpY2VzID0gbmV3IFJlZ0V4cCgnQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8QkJ8UGxheUJvb2t8SUVNb2JpbGV8V2luZG93cyBQaG9uZXxLaW5kbGV8U2lsa3xPcGVyYSBNaW5pJywgImkiKTsKCiAgICAgIGlmIChkZXZpY2VzLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsKICAgICAgICByZXR1cm4gJzEwMHB4JzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJzQwcHgnOwogICAgICB9CiAgICB9LAogICAgbG9naW5SZXE6IGZ1bmN0aW9uIGxvZ2luUmVxKHVzZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYWtlIHJlcXVlc3QgOicsIHVzZXIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goJy9hcGkvbG9naW4nLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgLy8g0LXRgdC70LggSFRUUC3RgdGC0LDRgtGD0YEg0LIg0LTQuNCw0L/QsNC30L7QvdC1IDIwMC0yOTkKICAgICAgICAgICAgICAgICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDRgtC10LvQviDQvtGC0LLQtdGC0LAgKNGB0LwuINC/0YDQviDRjdGC0L7RgiDQvNC10YLQvtC0INC90LjQttC1KQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UgPSAiLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnBhZ2UgPSAnc2lnblVwSXNPayc7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX3RoaXMuY2hhbmdlUGFnZSwgMTUwMCk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJva2trayIpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzcCA9ICIsIHJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA+IDI5OSAmJiByZXNwb25zZS5zdGF0dXMgPCA1MDApIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlc3AgPSAiLCByZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgICAgICAgICBfdGhpcy5wYWdlID0gJ3dyb25nJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID4gNTAwKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzb21lIHdyb25nIG9uIGJhY2tlbmQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoYW5nZVBhZ2U6IGZ1bmN0aW9uIGNoYW5nZVBhZ2UoKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCIvIik7CiAgICB9LAogICAgZ2V0Q29va2llOiBmdW5jdGlvbiBnZXRDb29raWUobmFtZSkgewogICAgICB2YXIgdmFsdWUgPSAiOyAiLmNvbmNhdChkb2N1bWVudC5jb29raWUpOwogICAgICB2YXIgcGFydHMgPSB2YWx1ZS5zcGxpdCgiOyAiLmNvbmNhdChuYW1lLCAiPSIpKTsKICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;EACA;EACAA;IAAA;MACAC,aADA;MAEAC,WAFA;MAGAC,WAHA;MAIAC,SAJA;MAKAC,SALA;MAMAC,QANA;MAOAC,aACA;QAAA;MAAA,CADA,EAEA;QAAA;MAAA,CAFA,CAPA;MAWAC,YAXA;MAYAC,gBACA;QAAA;MAAA,CADA,EAEA;QAAA;MAAA,CAFA,CAZA;MAgBAC,YACA;QAAA;MAAA,CADA,EAEA;QAAA;MAAA,CAFA,CAhBA;MAoBAC,aACA;QAAA;MAAA,CADA,EAEA;QAAA;MAAA,CAFA;IApBA;EAAA,CAFA;EA6BAC;IACAC,QADA,sBACA;MACA;MACA;QAAAR;QAAAG;MAAA;IACA,CAJA;IAKAM,KALA,mBAKA;MACA;IACA,CAPA;IAQAC,eARA,6BAQA;MACA;IACA,CAVA;IAWAC,SAXA,uBAWA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAlBA;IAmBAC,QAnBA,oBAmBAC,IAnBA,EAmBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBADA;gBAAA,OAEAC;kBACAC,cADA;kBAEAC;gBAFA,EAFA;;cAAA;gBAEAC,QAFA;;gBAQA;kBAAA;kBACA;kBACAJ;kBACA;kBACAK;kBACAL;kBACAA;gBACA,CAPA,MAOA;kBACAA;kBACA;gBACA,CAHA,MAGA;kBACAA;gBACA;;cApBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqBA,CAxCA;IAyCAM,UAzCA,wBAyCA;MACAC;IACA,CA3CA;IA8CAC,SA9CA,qBA8CAC,IA9CA,EA8CA;MACA;MACA;MACA;IACA;EAlDA;AA7BA","names":["data","page","valid","show","login","email","code","loginRules","password","passwordRules","codeRules","emailRules","methods","validate","reset","resetValidation","marginTop","loginReq","user","console","fetch","method","body","response","setTimeout","changePage","window","getCookie","name"],"sourceRoot":"src/components/login","sources":["Login.vue"],"sourcesContent":["<template>\n  <div>\n    <v-form\n        class=\"form\"\n        :style=\"'margin-top:'+marginTop()\"\n        ref=\"form\"\n        v-model=\"valid\"\n        lazy-validation\n    >\n\n      <v-text-field\n          size=\"30px\"\n          v-model=\"$store.state.user.email\"\n          :rules=\"emailRules\"\n          label=\"email\"\n          required\n          solo\n      ></v-text-field>\n\n      <v-text-field\n          v-model=\"$store.state.user.password\"\n          :rules=\"passwordRules\"\n          label=\"Password\"\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n          :type=\"show ? 'text' : 'password'\"\n          @click:append=\"show = !show\"\n          required\n          solo\n      ></v-text-field>\n\n\n      <v-btn\n          style=\"height: 40px;width: 100px\"\n          :disabled=\"!valid\"\n          color=\"primary\"\n          class=\"my-2\"\n          @click=\"validate\"\n      >\n        Login\n      </v-btn>\n\n      <v-btn\n          style=\"height: 40px;margin-left: 10px\"\n          class=\"my-2\"\n          @click=\"$router.push('/signUp');email='';login='';password=''\"\n      >\n        Sign up\n      </v-btn>\n\n    </v-form>\n\n\n    <v-form v-if=\"page==='signUpIsOk'\">\n      <div class=\"text-h2\" style=\"color: limegreen\">login is successful</div>\n    </v-form>\n    <v-form v-if=\"page==='wrong'\">\n      <div class=\"text-h2\" style=\"color: red\">Wrong login or password</div>\n    </v-form>\n    <!--    <v-btn-->\n    <!--        style=\"height: 40px;\"-->\n    <!--        color=\"primary\"-->\n    <!--        @click=\"signUp\"-->\n    <!--    >   send email-->\n    <!--    </v-btn>-->\n  </div>\n</template>\n\n<script>\n\nexport default {\n  // components: {SignUp},\n  data: () => ({\n    page: 'login',\n    valid: true,\n    show: false,\n    login: '',\n    email: '',\n    code: '',\n    loginRules: [\n      v => !!v || 'Login is required',\n      v => (v && v.length <= 6) || 'Login must be less than 4 characters',\n    ],\n    password: '',\n    passwordRules: [\n      v => !!v || 'Password is required',\n      v => (v && v.length <= 10) || 'Password must be less than 10 characters',\n    ],\n    codeRules: [\n      v => !!v || 'code is required',\n      v => (v && v.length === 4) || 'code must be 4 characters',\n    ],\n    emailRules: [\n      v => !!v || 'E-mail is required',\n      v => /.+@.+\\..+/.test(v) || 'E-mail must be valid',\n    ],\n\n  }),\n\n  methods: {\n    validate() {\n      this.$refs.form.validate()\n      this.loginReq({email: this.$store.state.user.email, password: this.$store.state.user.password})\n    },\n    reset() {\n      this.$refs.form.reset()\n    },\n    resetValidation() {\n      this.$refs.form.resetValidation()\n    },\n    marginTop() {\n      const devices = new RegExp('Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini', \"i\");\n      if (devices.test(navigator.userAgent)) {\n        return '100px'\n      } else {\n        return '40px'\n      }\n    },\n    async loginReq(user) {\n      console.log('make request :', user)\n      let response = await fetch('/api/login', {\n        method: 'POST',\n        body: JSON.stringify(user)\n      });\n\n\n      if (response.ok) { // если HTTP-статус в диапазоне 200-299\n        // получаем тело ответа (см. про этот метод ниже)\n        console.log(\"response = \", response)\n        this.page = 'signUpIsOk'\n        setTimeout(this.changePage, 1500)\n        console.log(\"okkkk\")\n        console.log(\"resp = \", response.status)\n      } else if (response.status > 299 && response.status < 500) {\n        console.log(\"resp = \", response.status)\n        this.page = 'wrong'\n      } else if (response.status > 500) {\n        console.log(\"some wrong on backend\")\n      }\n    },\n    changePage() {\n      window.location.replace(\"/\")\n    },\n\n\n    getCookie(name) {\n      const value = `; ${document.cookie}`;\n      const parts = value.split(`; ${name}=`);\n      if (parts.length === 2) return parts.pop().split(';').shift();\n    }\n  },\n}\n</script>\n\n<style scoped>\n.v-text-field input {\n  font-size: 30px;\n}\n\n</style>"]}]}